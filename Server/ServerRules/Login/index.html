<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
  <head>
    <title>Login</title>
    <script type="text/javascript" src="js/base64.js"></script>
    <script type="text/javascript" src="js/json2.js"></script>
    <script type="text/javascript" src="js/serverfunctionexecutor.js"></script>
    <script type="text/javascript" src="js/connection.js"></script>
    <script type="text/javascript" src="js/serverfunctions.js"></script>
    <script type="text/javascript" src="js/serverfunctioninvoker.js"></script>

    <script>
    function onLoad()
    {
      setConnection('localhost', '8080', '');
      showLogin(true);
    }

    function showLogin(show)
    {
      var loginDiv = document.getElementById('logindiv');
      if (show)
      {
          loginDiv.style.display="block";
      }
      else
      {
          loginDiv.style.display="none";
      }
    }

    function onLogin()
    {

      if (AdminInst == null)
        {
           alert('Antes de logar');

            var Logado = setCredentials(document.getElementById('userField').value, document.getElementById('passwrdField').value);

            if (Logado)
            {
              alert('Login corretamente corretooooo');
              createClassTree();
              loginCorrect(true);
            }
            else
            {
              alert('Login errraddoooooooo');
              loginCorrect(false);
            }
        }
    }

    function loginCorrect(isCorrect)
    {
      var errorDiv = document.getElementById('loginError');
      var corrDiv = document.getElementById('loginCorrect');

      if ( errorDiv != null )
      {
        alert('Login incorreto!');
        corrDiv.innerHTML= "";
        errorDiv.innerHTML= isCorrect ? "" : "Entrada incorreta!";
      }
      else
      {
        alert('Login efetuado com sucesso!');
        errorDiv.innerHTML= "";
        corrDiv.innerHTML= "Entrada efetuada com sucesso!";
      }
    }
    </script>

  </head>

  <body onload="onLoad()">
  <div id="maincontent">
    <div id="contentdiv">
      <div id="logindiv" class="logindiv" style="display:none">
      <p class="divlabel">Entre com sua conta</p><br />
      <form onsubmit="onLogin(); return false;">
        <table class="authtable">
          <tr>
            <td>
               Usuário:</td><td><input id="userField" class="loginField" type="text" />
            </td>
          </tr>
          <tr>
            <td>
              Senha:</td><td><input id="passwrdField" class="loginField" type="password" />
            </td>
          </tr>
        </table>
        <div id="loginError" style="color:red;"></div>
        <div id="loginCorrect" style="color:blue;"></div>
        <br />
        <input id="loginButton" type="submit" value="ENTRAR" />
      </form>
      </div>
    </div>
    </div>

  </body>
</html>

